
// -- user code here --

/* --- start generated code --- */

// Generated by  1.5.2 (Phaser v2.6.2)


/**
 * Preloader.
 */
function Preloader() {
	
	Phaser.State.call(this);
	
}

/** @type Phaser.State */
var Preloader_proto = Object.create(Phaser.State.prototype);
Preloader.prototype = Preloader_proto;
Preloader.prototype.constructor = Preloader;

Preloader.prototype.init = function () {
	
	this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
	this.scale.pageAlignHorizontally = true;
	this.scale.pageAlignVertically = true;
	this.ready = false;
	/* for test progress bar
	this.date = new Date();
	this.time = 0;
	// */
};

Preloader.prototype.preload = function () {
	
	
	this.preloadLogo = this.add.sprite(0, 0, 'logo');
	this.preloadLogo.x = this.game.width / 2;
	this.preloadLogo.y = this.game.height / 2;
	this.centerBar = [this.game.width / 2,this.game.height / 2];
	this.preloadBar = this.add.graphics();
	this.dimBar=[this.game.width*0.5,this.game.height*0.1];
	this.preloadFrame = this.add.graphics();
	this.preloadFrame.fillStyle(0x222222, 0.8);
	this.preloadFrame.fillRect(this.centerBar[0]-this.dimBar[0]/2, this.centerBar[1]-this.dimBar[1]/2, this.dimBar[0], this.dimBar[1]);
	this.load.on('progress', function (value) {
	    console.log(value);
	    this.preloadBar.clear();
	    this.preloadBar.fillStyle(0xffffff, 1);
	    this.preloadBar.fillRect(this.centerBar[0]-this.dimBar[0]/2, this.centerBar[1]-this.dimBar[1]/2, this.dimBar[0] * value, this.dimBar[1]);
	},this);
	this.load.pack('preloader', 'assets/pack.json');
	/* for test progress bar*/
	/*this.load.image('prova', 'http://it.chromaate.com/chroma/webdrive/products/6310a/6310a_4.jpg?q=' + Math.random(100));
	this.load.image('prova2', 'http://it.chromaate.com/chroma/webdrive/products/6310a/6310a_4.jpg?' + Math.random(100));
	//*/
	
	
};
Preloader.prototype.create = function () {
	// setting player animation
    this.anims.create({
        key: "run",
        frames: this.anims.generateFrameNumbers("player", {
            start: 0,
            end: 2
        }),
        frameRate: 15,
        repeat: -1
    });

    // setting coin animation
    this.anims.create({
        key: "rotate",
        frames: this.anims.generateFrameNumbers("coin", {
            start: 0,
            end: 5
        }),
        frameRate: 15,
        yoyo: true,
        repeat: -1
    });

    // setting fire animation
    this.anims.create({
        key: "burn",
        frames: this.anims.generateFrameNumbers("fire", {
            start: 0,
            end: 4
        }),
        frameRate: 15,
        repeat: -1
    });
};

Preloader.prototype.update = function () {
	
	// all the assets are loaded, go to the menu screen
	this.game.state.start("Menu");
	
	
};

/* --- end generated code --- */
// -- user code here --
